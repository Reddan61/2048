(()=>{"use strict";var n={523:(n,t,e)=>{e.d(t,{A:()=>a});var i=e(601),o=e.n(i),r=e(314),s=e.n(r)()(o());s.push([n.id,"body {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    gap: 24px;\n    width: 100%;\n    min-height: 100vh;\n    max-height: 100vh;\n}\n\n#canvas {\n    border-radius: 8px;\n    border: 8px solid #929697;\n    background-color: #d0c0b0;\n}\n\n#score {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    min-width: 300px;\n    font-size: 54px;\n    border-radius: 24px;\n    border: 8px solid #929697;\n    background-color: #d0c0b0;\n}\n",""]);const a=s},430:(n,t,e)=>{e.d(t,{A:()=>a});var i=e(601),o=e.n(i),r=e(314),s=e.n(r)()(o());s.push([n.id,'html,\nbody,\ndiv,\nspan,\napplet,\nobject,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote,\npre,\na,\nabbr,\nacronym,\naddress,\nbig,\ncite,\ncode,\ndel,\ndfn,\nem,\nimg,\nins,\nkbd,\nq,\ns,\nsamp,\nsmall,\nstrike,\nstrong,\nsub,\nsup,\ntt,\nvar,\nb,\nu,\ni,\ncenter,\ndl,\ndt,\ndd,\nol,\nul,\nli,\nfieldset,\nform,\nlabel,\nlegend,\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\narticle,\naside,\ncanvas,\ndetails,\nembed,\nfigure,\nfigcaption,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\noutput,\nruby,\nsection,\nsummary,\ntime,\nmark,\naudio,\nvideo {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n}\n\n/* make sure to set some focus styles for accessibility */\n:focus {\n  outline: 0;\n}\n\n/* HTML5 display-role reset for older browsers */\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection {\n  display: block;\n}\n\nbody {\n  line-height: 1;\n}\n\nol,\nul {\n  list-style: none;\n}\n\nblockquote,\nq {\n  quotes: none;\n}\n\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: "";\n  content: none;\n}\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\ninput[type="search"]::-webkit-search-cancel-button,\ninput[type="search"]::-webkit-search-decoration,\ninput[type="search"]::-webkit-search-results-button,\ninput[type="search"]::-webkit-search-results-decoration {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n}\n\ninput[type="search"] {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  -webkit-box-sizing: content-box;\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\ntextarea {\n  overflow: auto;\n  vertical-align: top;\n  resize: vertical;\n}\n\n/**\n * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.\n */\n\naudio,\ncanvas,\nvideo {\n  display: inline-block;\n  *display: inline;\n  *zoom: 1;\n  max-width: 100%;\n}\n\n/**\n * Prevent modern browsers from displaying `audio` without controls.\n * Remove excess height in iOS 5 devices.\n */\n\naudio:not([controls]) {\n  display: none;\n  height: 0;\n}\n\n/**\n * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.\n * Known issue: no IE 6 support.\n */\n\n[hidden] {\n  display: none;\n}\n\n/**\n * 1. Correct text resizing oddly in IE 6/7 when body `font-size` is set using\n *    `em` units.\n * 2. Prevent iOS text size adjust after orientation change, without disabling\n *    user zoom.\n */\n\nhtml {\n  font-size: 100%; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n  -ms-text-size-adjust: 100%; /* 2 */\n}\n\n/**\n * Address `outline` inconsistency between Chrome and other browsers.\n */\n\na:focus {\n  outline: thin dotted;\n}\n\n/**\n * Improve readability when focused and also mouse hovered in all browsers.\n */\n\na:active,\na:hover {\n  outline: 0;\n}\n\n/**\n * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.\n * 2. Improve image quality when scaled in IE 7.\n */\n\nimg {\n  border: 0; /* 1 */\n  -ms-interpolation-mode: bicubic; /* 2 */\n}\n\n/**\n * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.\n */\n\nfigure {\n  margin: 0;\n}\n\n/**\n * Correct margin displayed oddly in IE 6/7.\n */\n\nform {\n  margin: 0;\n}\n\n/**\n * Define consistent border, margin, and padding.\n */\n\nfieldset {\n  border: 1px solid #c0c0c0;\n  margin: 0 2px;\n  padding: 0.35em 0.625em 0.75em;\n}\n\n/**\n * 1. Correct color not being inherited in IE 6/7/8/9.\n * 2. Correct text not wrapping in Firefox 3.\n * 3. Correct alignment displayed oddly in IE 6/7.\n */\n\nlegend {\n  border: 0; /* 1 */\n  padding: 0;\n  white-space: normal; /* 2 */\n  *margin-left: -7px; /* 3 */\n}\n\n/**\n * 1. Correct font size not being inherited in all browsers.\n * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,\n *    and Chrome.\n * 3. Improve appearance and consistency in all browsers.\n */\n\nbutton,\ninput,\nselect,\ntextarea {\n  font-size: 100%; /* 1 */\n  margin: 0; /* 2 */\n  vertical-align: baseline; /* 3 */\n  *vertical-align: middle; /* 3 */\n}\n\n/**\n * Address Firefox 3+ setting `line-height` on `input` using `!important` in\n * the UA stylesheet.\n */\n\nbutton,\ninput {\n  line-height: normal;\n}\n\n/**\n * Address inconsistent `text-transform` inheritance for `button` and `select`.\n * All other form control elements do not inherit `text-transform` values.\n * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.\n * Correct `select` style inheritance in Firefox 4+ and Opera.\n */\n\nbutton,\nselect {\n  text-transform: none;\n}\n\n/**\n * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`\n *    and `video` controls.\n * 2. Correct inability to style clickable `input` types in iOS.\n * 3. Improve usability and consistency of cursor style between image-type\n *    `input` and others.\n * 4. Remove inner spacing in IE 7 without affecting normal text inputs.\n *    Known issue: inner spacing remains in IE 6.\n */\n\nbutton,\nhtml input[type="button"], /* 1 */\ninput[type="reset"],\ninput[type="submit"] {\n  -webkit-appearance: button; /* 2 */\n  cursor: pointer; /* 3 */\n  *overflow: visible; /* 4 */\n}\n\n/**\n * Re-set default cursor for disabled elements.\n */\n\nbutton[disabled],\nhtml input[disabled] {\n  cursor: default;\n}\n\n/**\n * 1. Address box sizing set to content-box in IE 8/9.\n * 2. Remove excess padding in IE 8/9.\n * 3. Remove excess padding in IE 7.\n *    Known issue: excess padding remains in IE 6.\n */\n\ninput[type="checkbox"],\ninput[type="radio"] {\n  box-sizing: border-box; /* 1 */\n  padding: 0; /* 2 */\n  *height: 13px; /* 3 */\n  *width: 13px; /* 3 */\n}\n\n/**\n * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.\n * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome\n *    (include `-moz` to future-proof).\n */\n\ninput[type="search"] {\n  -webkit-appearance: textfield; /* 1 */\n  -moz-box-sizing: content-box;\n  -webkit-box-sizing: content-box; /* 2 */\n  box-sizing: content-box;\n}\n\n/**\n * Remove inner padding and search cancel button in Safari 5 and Chrome\n * on OS X.\n */\n\ninput[type="search"]::-webkit-search-cancel-button,\ninput[type="search"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n * Remove inner padding and border in Firefox 3+.\n */\n\nbutton::-moz-focus-inner,\ninput::-moz-focus-inner {\n  border: 0;\n  padding: 0;\n}\n\n/**\n * 1. Remove default vertical scrollbar in IE 6/7/8/9.\n * 2. Improve readability and alignment in all browsers.\n */\n\ntextarea {\n  overflow: auto; /* 1 */\n  vertical-align: top; /* 2 */\n}\n\n/**\n * Remove most spacing between table cells.\n */\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\nhtml,\nbutton,\ninput,\nselect,\ntextarea {\n  color: #222;\n}\n\n::-moz-selection {\n  background: #b3d4fc;\n  text-shadow: none;\n}\n\n::selection {\n  background: #b3d4fc;\n  text-shadow: none;\n}\n\nimg {\n  vertical-align: middle;\n}\n\nfieldset {\n  border: 0;\n  margin: 0;\n  padding: 0;\n}\n\ntextarea {\n  resize: vertical;\n}\n\n.chromeframe {\n  margin: 0.2em 0;\n  background: #ccc;\n  color: #000;\n  padding: 0.2em 0;\n}\n',""]);const a=s},314:n=>{n.exports=function(n){var t=[];return t.toString=function(){return this.map((function(t){var e="",i=void 0!==t[5];return t[4]&&(e+="@supports (".concat(t[4],") {")),t[2]&&(e+="@media ".concat(t[2]," {")),i&&(e+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),e+=n(t),i&&(e+="}"),t[2]&&(e+="}"),t[4]&&(e+="}"),e})).join("")},t.i=function(n,e,i,o,r){"string"==typeof n&&(n=[[null,n,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var l=0;l<n.length;l++){var u=[].concat(n[l]);i&&s[u[0]]||(void 0!==r&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=r),e&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=e):u[2]=e),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},601:n=>{n.exports=function(n){return n[1]}},72:n=>{var t=[];function e(n){for(var e=-1,i=0;i<t.length;i++)if(t[i].identifier===n){e=i;break}return e}function i(n,i){for(var r={},s=[],a=0;a<n.length;a++){var c=n[a],l=i.base?c[0]+i.base:c[0],u=r[l]||0,h="".concat(l," ").concat(u);r[l]=u+1;var p=e(h),d={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(d);else{var f=o(d,i);i.byIndex=a,t.splice(a,0,{identifier:h,updater:f,references:1})}s.push(h)}return s}function o(n,t){var e=t.domAPI(t);return e.update(n),function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap&&t.supports===n.supports&&t.layer===n.layer)return;e.update(n=t)}else e.remove()}}n.exports=function(n,o){var r=i(n=n||[],o=o||{});return function(n){n=n||[];for(var s=0;s<r.length;s++){var a=e(r[s]);t[a].references--}for(var c=i(n,o),l=0;l<r.length;l++){var u=e(r[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}r=c}}},659:n=>{var t={};n.exports=function(n,e){var i=function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(n){e=null}t[n]=e}return t[n]}(n);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}},540:n=>{n.exports=function(n){var t=document.createElement("style");return n.setAttributes(t,n.attributes),n.insert(t,n.options),t}},56:(n,t,e)=>{n.exports=function(n){var t=e.nc;t&&n.setAttribute("nonce",t)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=n.insertStyleElement(n);return{update:function(e){!function(n,t,e){var i="";e.supports&&(i+="@supports (".concat(e.supports,") {")),e.media&&(i+="@media ".concat(e.media," {"));var o=void 0!==e.layer;o&&(i+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),i+=e.css,o&&(i+="}"),e.media&&(i+="}"),e.supports&&(i+="}");var r=e.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(i,n,t.options)}(t,n,e)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(t)}}}},113:n=>{n.exports=function(n,t){if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}}},t={};function e(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={id:i,exports:{}};return n[i](r,r.exports,e),r.exports}e.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},e.d=(n,t)=>{for(var i in t)e.o(t,i)&&!e.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:t[i]})},e.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),e.nc=void 0;var i="undefined"!=typeof Float32Array?Float32Array:Array;function o(){var n=new i(2);return i!=Float32Array&&(n[0]=0,n[1]=0),n}function r(n,t){var e=new i(2);return e[0]=n,e[1]=t,e}function s(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n}function a(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n}function c(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var n=0,t=arguments.length;t--;)n+=arguments[t]*arguments[t];return Math.sqrt(n)}),o();var l={2:"#eee4da",4:"#eee0c6",8:"#f9b377",16:"#ff9b60",32:"#cb6a49",64:"#ec6233",128:"#e8c463",256:"#e0ba55",512:"#f3c54b",1024:"#f2c138",2048:"#f3bd29"},u=function(){function n(n,t,e){var i=this;this.animation=null,this._onChangeScore=null,this.onChangeScore=function(n){i._onChangeScore=n},this.position=n,this.weight=e,this.color=this.generateWeightColor(e),this.size=t}return n.prototype.update=function(){var n;if(null===(n=this.animation)||void 0===n?void 0:n.isFinished())return this.animation=null,null;this.animation&&this.setPosition(this.animation.update())},n.prototype.getAnimation=function(){return this.animation},n.prototype.getPosition=function(){return this.position},n.prototype.getColor=function(){return this.color},n.prototype.getSize=function(){return this.size},n.prototype.getWeight=function(){return this.weight},n.prototype.isEqual=function(n){return this.getWeight()===n.getWeight()},n.prototype.double=function(){this.changeWeight(2*this.getWeight())},n.prototype.setPosition=function(n){this.position=n},n.prototype.setAnimation=function(n){this.animation=n},n.prototype.changeWeight=function(n){var t;this.weight=n,this.color=this.generateWeightColor(n),null===(t=this._onChangeScore)||void 0===t||t.call(this,this.weight)},n.prototype.generateWeightColor=function(n){var t=l[n];return null!=t?t:"#00000"},n}(),h=function(){function n(n,t,e){void 0===e&&(e=null),this.TIME=250,this.startTime=0,this.finish=!1,this.onAnimationEnd=null,this.start=n,this.end=t,this.startTime=performance.now(),this.onAnimationEnd=e}return n.prototype.isFinished=function(){return this.finish},n.prototype.update=function(){var n;if(this.isFinished())return this.end;var t=performance.now()-this.startTime,e=Math.min(t/this.TIME,1),i=o();return a(i,this.end,this.start),c(i,i,e),s(i,i,this.start),e>=1&&(this.finish=!0,null===(n=this.onAnimationEnd)||void 0===n||n.call(this)),i},n.prototype.getEnd=function(){return this.end},n}(),p=function(){function n(n,t,e){this.object=null,this.worldPosition=n,this.mapPosition=t,this.onDelete=e}return n.prototype.isEmpty=function(){return!this.object},n.prototype.getObject=function(){return this.object},n.prototype.getMapPosition=function(){return this.mapPosition},n.prototype.deleteObject=function(){this.object=null},n.prototype.mergeObjects=function(n){var t=this;if(!this.isEmpty()&&!n.isEmpty()){var e=this.getObject(),i=n.getObject();if(e.isEqual(i)){e.double();var o=e.getAnimation();n.deleteObject(),o?i.setAnimation(new h(i.getPosition(),o.getEnd(),(function(){t.onDelete(i)}))):i.setAnimation(new h(i.getPosition(),e.getPosition(),(function(){t.onDelete(i)})))}}},n.prototype.setObject=function(n){this.object=n},n.prototype.swapObjects=function(n){var t=n.getObject();if(this.isEmpty()&&!n.isEmpty()){var e=this.calculateObjectOptions().objectPos;this.setObject(t),n.deleteObject(),t.setAnimation(new h(t.getPosition(),e))}},n.prototype.calculateObjectOptions=function(){var n=o();c(n,this.worldPosition,.7);var t=o();a(t,this.worldPosition,n),c(t,t,.5);var e,i,r,l=o();return e=l,i=this.worldPosition,r=this.mapPosition,e[0]=i[0]*r[0],e[1]=i[1]*r[1],s(l,l,t),{objectSize:n,objectPos:l}},n.prototype.spawn=function(n){var t=this.calculateObjectOptions(),e=t.objectPos,i=t.objectSize;return this.object=new u(e,i,n),this.object},n}(),d=function(){function n(n){var t=this;this.MAX_WEIGHT=2048,this.MIN_MOUSE_MOVE=100,this.score=0,this.moving=!1,this.map=[],this.freeCells=[],this.objects=[],this.lastMousePos=r(0,0),this._onChangeScore=null,this.canvasSize={x:0,y:0},this.mapSize={x:4,y:4},this.sides=[{side:[-1,0],can:!1},{side:[1,0],can:!1},{side:[0,1],can:!1},{side:[0,-1],can:!1}],this.run=function(){requestAnimationFrame(t.tick)},this.tick=function(){t.checkAnimations()||(t.moving&&(t.spawn(),t.moving=!1),t.checkWin()&&t.onWin(),t.checkGameOver()&&t.gameOver()),t.update(),t.clear(),t.calculateCanMoveDirections(),t.draw(),requestAnimationFrame(t.tick)};var e=document.getElementById(n);if(!e)throw new Error("Wrong canvasID");this.canvas=e,this.normalizeCanvas(this.canvas);var i=e.getContext("2d");if(!i)throw new Error("Context error");this.ctx=i,this.reset(),this.subscribe()}return n.prototype.onChangeScore=function(n){this._onChangeScore=n},n.prototype.setScore=function(n){var t;this.score=n,null===(t=this._onChangeScore)||void 0===t||t.call(this,this.score)},n.prototype.update=function(){this.objects.forEach((function(n){return n.update()}))},n.prototype.checkWin=function(){for(var n=0;n<this.objects.length;n++)if(this.objects[n].getWeight()===this.MAX_WEIGHT)return!0;return!1},n.prototype.onWin=function(){alert("Уровень пройден"),this.reset()},n.prototype.checkAnimations=function(){for(var n=0;n<this.objects.length;n++)if(this.objects[n].getAnimation())return!0;return!1},n.prototype.reset=function(){this.initMap(),this.spawn(2),this.spawn(2),this.calculateCanMoveDirections(),this.setScore(0)},n.prototype.draw=function(){for(var n=0;n<this.objects.length;n++){var t=this.objects[n],e=t.getPosition(),i=t.getSize(),o=t.getColor(),s=r(e[0]+i[0]/2,e[1]+i[1]/2);this.ctx.strokeStyle=o,this.ctx.fillStyle=o,this.ctx.beginPath(),this.ctx.roundRect(e[0],e[1],i[0],i[1],12),this.ctx.fill(),this.ctx.stroke(),this.ctx.fillStyle="#000000",this.ctx.font="28px serif",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(String(t.getWeight()),s[0],s[1])}},n.prototype.spawn=function(n){var t,e,i,o=this;if(void 0===n&&(n=null),this.generateMapFreeCells(),0!==this.freeCells.length){var r=(t=this.freeCells.length,e=Math.ceil(0),i=Math.floor(t),Math.floor(Math.random()*(i-e)+e)),s=this.freeCells[r],a=Math.random(),c=null!=n?n:2;!n&&a<=.1&&(c=4);var l=this.map[s[1]][s[0]].spawn(c);l.onChangeScore((function(n){o.setScore(o.score+n)})),this.objects.push(l),this.generateMapFreeCells()}},n.prototype.gameOver=function(){alert("Нельзя сделать ход"),this.reset()},n.prototype.generateMapFreeCells=function(){for(var n=[],t=0;t<this.mapSize.y;t++)for(var e=0;e<this.mapSize.x;e++){var i=this.map[t][e];i.isEmpty()&&n.push(i.getMapPosition())}this.freeCells=n},n.prototype.isFull=function(){return 0===this.freeCells.length},n.prototype.initMap=function(){for(var n=this,t=0;t<this.mapSize.y;t++){this.map[t]=[];for(var e=0;e<this.mapSize.x;e++){var i=r(this.canvasSize.x/this.mapSize.x,this.canvasSize.y/this.mapSize.y);this.map[t][e]=new p(i,r(e,t),(function(t){n.deleteObject(t)}))}}this.objects=[]},n.prototype.calculateCanMoveDirections=function(){for(var n=this,t=[{side:[-1,0],can:!1},{side:[1,0],can:!1},{side:[0,1],can:!1},{side:[0,-1],can:!1}],e=function(e){for(var o=function(o){var r=i.map[e][o];if(r.isEmpty())return"continue";for(var s=t.map((function(t){var i,r=t.side,s=r[0],a=r[1],c=null===(i=n.map[e+a])||void 0===i?void 0:i[o+s];return null!=c?c:null})),a=r.getObject().getWeight(),c=0;c<t.length;c++){var l=t[c],u=s[c];u&&(l.can||(u.isEmpty()||a===u.getObject().getWeight())&&(l.can=!0))}},r=0;r<i.mapSize.x;r++)o(r)},i=this,o=0;o<this.mapSize.y;o++)e(o);this.sides=t},n.prototype.checkGameOver=function(){if(!this.isFull())return!1;for(var n=!1,t=0;t<this.sides.length;t++){var e=this.sides[t].can;if(e){n=e;break}}return!n},n.prototype.clear=function(){this.ctx.clearRect(0,0,this.canvasSize.x,this.canvasSize.y)},n.prototype.normalizeCanvas=function(n){var t=500;n.width=t,n.height=t,this.canvasSize.x=t,this.canvasSize.y=t},n.prototype.deleteObject=function(n){this.objects=this.objects.filter((function(t){return t!==n}))},n.prototype.move=function(n){for(var t=0;t<n.length;){var e=n[t],i=n.slice(t+1,n.length).find((function(n){return!n.isEmpty()}));if(!i)break;e.isEmpty()?e.swapObjects(i):(e.mergeObjects(i),t++)}this.moving=!0},n.prototype.moveLeft=function(){if(this.canMoveLeft())for(var n=0;n<this.mapSize.y;n++)this.move(this.map[n])},n.prototype.moveRight=function(){if(this.canMoveRight())for(var n=0;n<this.mapSize.y;n++){var t=this.map[n].reverse();this.move(t),t.reverse(),this.map[n]=t}},n.prototype.moveUp=function(){if(this.canMoveUp())for(var n=0;n<this.mapSize.x;n++){for(var t=[],e=0;e<this.mapSize.y;e++)t.push(this.map[e][n]);for(this.move(t),e=0;e<this.mapSize.y;e++)this.map[e][n]=t[e]}},n.prototype.moveDown=function(){if(this.canMoveDown())for(var n=0;n<this.mapSize.x;n++){for(var t=[],e=0;e<this.mapSize.y;e++)t.push(this.map[e][n]);for(t.reverse(),this.move(t),t.reverse(),e=0;e<this.mapSize.y;e++)this.map[e][n]=t[e]}},n.prototype.canMoveUp=function(){return this.sides[3].can},n.prototype.canMoveDown=function(){return this.sides[2].can},n.prototype.canMoveLeft=function(){return this.sides[0].can},n.prototype.canMoveRight=function(){return this.sides[1].can},n.prototype.subscribe=function(){var n=this;document.addEventListener("keydown",(function(t){if(n.moving)return null;switch(t.code){case"ArrowUp":n.moveUp();break;case"ArrowDown":n.moveDown();break;case"ArrowRight":n.moveRight();break;case"ArrowLeft":n.moveLeft()}})),document.addEventListener("mousedown",(function(t){var e=n.canvas.getBoundingClientRect();n.lastMousePos[0]=t.clientX-e.left,n.lastMousePos[1]=t.clientY-e.top})),document.addEventListener("mouseup",(function(t){var e=n.canvas.getBoundingClientRect(),i=r(t.clientX-e.left,t.clientY-e.top),s=o();a(s,i,n.lastMousePos),n.lastMousePos=i;var c=r(Math.abs(s[0]),Math.abs(s[1]));c[0]<n.MIN_MOUSE_MOVE&&c[1]<n.MIN_MOUSE_MOVE||(c[0]>c[1]?s[0]>0?n.moveRight():n.moveLeft():s[1]>0?n.moveDown():n.moveUp())}))},n}(),f=e(72),m=e.n(f),v=e(825),b=e.n(v),g=e(659),y=e.n(g),x=e(56),w=e.n(x),S=e(540),z=e.n(S),E=e(113),M=e.n(E),C=e(523),A={};A.styleTagTransform=M(),A.setAttributes=w(),A.insert=y().bind(null,"head"),A.domAPI=b(),A.insertStyleElement=z(),m()(C.A,A),C.A&&C.A.locals&&C.A.locals;var j=e(430),k={};k.styleTagTransform=M(),k.setAttributes=w(),k.insert=y().bind(null,"head"),k.domAPI=b(),k.insertStyleElement=z(),m()(j.A,k),j.A&&j.A.locals&&j.A.locals,function(){var n=document.getElementById("score");if(n){var t=new d("canvas");t.onChangeScore((function(t){n.innerHTML="СЧЁТ: ".concat(t)})),t.run()}}()})();